import"../chunks/COm6N4YE.js";import{p as P,h as L,a as H,g as V,j as W,b as w,c as E,l,o as c,m as N,f as O,d as u,r as d,O as K,k as de,s as x,t as le,X as fe,n as ne}from"../chunks/FcNz6uVe.js";import{d as ie,e as we}from"../chunks/BsEKk5dv.js";import{i as Z}from"../chunks/7ms9Oyq9.js";import{s as z,c as q}from"../chunks/Cb4E-4CT.js";import{p as I}from"../chunks/DUEo-2bu.js";import{t as pe,s as ye,f as Se,M as je}from"../chunks/BQspDZ5E.js";import"../chunks/vsAJmYaO.js";import{g as C}from"../chunks/QXgKwo3K.js";import{c as me}from"../chunks/B-YvmJ5T.js";import{s as D,r as X,b as te,a as ae,c as ve,p as A,m as Ce}from"../chunks/BdHP4ea0.js";import{s as se}from"../chunks/Bya-iZhh.js";import{o as Me,s as Ne}from"../chunks/CQT1G1Sl.js";import{L as Pe}from"../chunks/CQ_J3efe.js";import{C as ge}from"../chunks/DQJhOXeN.js";import{a as he}from"../chunks/KtqtB2k4.js";import{l as Ee}from"../chunks/CoYuMvfO.js";import{c as Te}from"../chunks/BWmCwwzs.js";import{U as J,M as ze,s as ee,a as oe,g as Fe,b as Ie}from"../chunks/Cy75KbwB.js";import{I as Y,r as He,g as Le,b as Oe,d as Ue}from"../chunks/tpmtnrJv.js";import{S as be}from"../chunks/BiDXjf4q.js";import{b as Re}from"../chunks/Bwa16pwB.js";import{b as Be}from"../chunks/nfhiTeln.js";import{C as qe}from"../chunks/Dr_6PlBV.js";function Ae(s,e){P(e,!0);let f=X(e,["$$slots","$$events","$$legacy"]);const p=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}],["circle",{cx:"12",cy:"12",r:"4"}]];Y(s,D({name:"bolt"},()=>f,{get iconNode(){return p},children:(o,a)=>{var t=L(),i=H(t);V(i,()=>{var n;return(n=e.children)!=null?n:W}),w(o,t)},$$slots:{default:!0}})),E()}function Ve(s,e){P(e,!0);let f=X(e,["$$slots","$$events","$$legacy"]);const p=[["path",{d:"m6 9 6 6 6-6"}]];Y(s,D({name:"chevron-down"},()=>f,{get iconNode(){return p},children:(o,a)=>{var t=L(),i=H(t);V(i,()=>{var n;return(n=e.children)!=null?n:W}),w(o,t)},$$slots:{default:!0}})),E()}function De(s,e){P(e,!0);let f=X(e,["$$slots","$$events","$$legacy"]);const p=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}],["path",{d:"M12 8v8"}]];Y(s,D({name:"circle-plus"},()=>f,{get iconNode(){return p},children:(o,a)=>{var t=L(),i=H(t);V(i,()=>{var n;return(n=e.children)!=null?n:W}),w(o,t)},$$slots:{default:!0}})),E()}function Qe(s,e){P(e,!0);let f=X(e,["$$slots","$$events","$$legacy"]);const p=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];Y(s,D({name:"house"},()=>f,{get iconNode(){return p},children:(o,a)=>{var t=L(),i=H(t);V(i,()=>{var n;return(n=e.children)!=null?n:W}),w(o,t)},$$slots:{default:!0}})),E()}function We(s,e){P(e,!0);let f=X(e,["$$slots","$$events","$$legacy"]);const p=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}],["polyline",{points:"16 17 21 12 16 7"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12"}]];Y(s,D({name:"log-out"},()=>f,{get iconNode(){return p},children:(o,a)=>{var t=L(),i=H(t);V(i,()=>{var n;return(n=e.children)!=null?n:W}),w(o,t)},$$slots:{default:!0}})),E()}const Xe=(s,e)=>{s.target===s.currentTarget&&ve(se,null)};var Ye=O('<div class="top-0 left-0 w-dvw h-dvh modal-container fixed flex flex-col justify-end items-center text-center pointer-events-none svelte-cpprqb"><div class="modal mx-auto mb-16 max-w-[88dvw] max-h-32 bg-light-card-1 dark:bg-dark-card-1 rounded-xl py-2 px-4 flex justify-center items-center drop-shadow-light-bg-hc dark:drop-shadow-dark-bg-hc svelte-cpprqb"><!></div></div>');function Ge(s,e){P(e,!0);const[f,p]=te(),o=()=>ae(se,"$snackbarStore",f);let a=N(!1),t=null,i=null;se.subscribe(_=>{console.log("Snackbar updated"),t&&(clearTimeout(t),t=null),i&&(clearTimeout(i),i=null),l(a)&&_!==null?(c(a,!1),t=setTimeout(()=>{c(a,!0),i=setTimeout(()=>c(a,!1),4e3)},100)):_!==null&&(c(a,!0),i=setTimeout(()=>c(a,!1),4e3))});var n=L(),y=H(n);{var h=_=>{var k=Ye();k.__click=[Xe,o];var m=u(k),S=u(m);me(S,()=>{var r;return(r=o())==null?void 0:r.component},(r,b)=>{b(r,D(()=>{var v,F;return(F=(v=o())==null?void 0:v.props)!=null?F:{}}))}),d(m),d(k),pe(3,m,()=>ye,()=>({duration:300,opacity:0})),pe(3,k,()=>Se,()=>({duration:300})),w(_,k)};Z(y,_=>{l(a)&&_(h)})}w(s,n),E(),p()}ie(["click"]);var Je=O(`<header class="fixed top-0 -translate-x-1/2 left-1/2 w-full max-w-[500px] h-16 flex justify-between items-center p-2.5 rounded-b-lg
     dark:bg-dark-card-3 bg-light-card-3 *:dark:text-dark-fg-500 *:text-light-fg-500 z-50"><a href="/" aria-label="logo" class="max-h-full w-fit h-9/12 color-dark-fg-500 *:h-full *:w-auto *:dark:text-dark-fg-500 *:text-light-fg-500"><!></a> <div class="flex justify-center gap-5 px-2"><div class="relative flex justify-center items-center"><!> <!></div> <div class="relative flex justify-center items-center"><!> <!></div></div></header>`);function Ke(s,e){P(e,!0);const[f,p]=te(),o=()=>ae(he,"$appState",f);let a=N(!1),t=N(!1);K(()=>{l(a)&&c(t,!1),l(t)&&c(a,!1)}),Me(()=>{o().globalOnClick.push(g=>{c(a,!1)})});const i=de([{name:"User",icon:J,action:()=>{C(`/app?context=search&then=${I.url.href}`),ee.set(oe.user)}},{name:"Restaurant",icon:ze,action:()=>{C(`/app?context=search&then=${I.url.href}`),ee.set(oe.restaurant)}}]);let n=N(de([{name:"loading...",action:()=>{}}]));Te.subscribe(g=>{if(g.loading){c(n,[{name:"loading...",action:()=>{}}],!0);return}g.data!==null?c(n,[{name:"Log out",action:()=>{Ee(()=>C("/account/login",{replaceState:!0}))},icon:We},{name:"Your profile",action:()=>{C("/app/user",{replaceState:!1})},icon:J},{name:"Settings",action:()=>{C("/app/settings",{replaceState:!1})},icon:Ae}],!0):c(n,[{name:"Log in",action:()=>{C("/account/login",{replaceState:!0})}},{name:"Register",action:()=>{C("/account/register",{replaceState:!0})}}],!0)});var y=Je(),h=u(y),_=u(h);Pe(_,{}),d(h);var k=x(h,2),m=u(k),S=u(m);be(S,{width:32,className:"h-full w-auto",onclick:g=>{c(t,!0),g.stopPropagation()}});var r=x(S,2);ge(r,{get entries(){return i},get showing(){return l(t)},set showing(g){c(t,g,!0)}}),d(m);var b=x(m,2),v=u(b);ge(v,{get entries(){return l(n)},set entries(g){c(n,g,!0)},get showing(){return l(a)},set showing(g){c(a,g,!0)}});var F=x(v,2);J(F,{className:"h-full w-auto",onclick:g=>{c(a,!0),g.stopPropagation()}}),d(b),d(k),d(y),w(s,y),E(),p()}var Ze=(s,e)=>{s.stopPropagation(),setTimeout(()=>c(e,!l(e)))},et=(s,e,f)=>e(l(f)),tt=O("<button><!> <p> </p></button>"),at=O('<div class="flex flex-col justify-start items-center p-2 absolute right-0 top-full rounded-b-lg bg-light-field-bg dark:bg-dark-field-bg max-w-full gap-2 w-48 min-w-fit"><p class="w-full text-sm">Search by</p> <!></div>'),rt=O('<div><div class="flex w-full h-full items-center"><input type="text" class="w-full h-full outline-none grow"/> <button class="h-fit p-1 bg-light-field-subbg dark:bg-dark-field-subbg rounded-md"><span><!></span></button></div> <!></div>');function nt(s,e){P(e,!0);const[f,p]=te(),o=()=>ae(he,"$appState",f);let a=N(!1),t=A(e,"currentItem",15,null),i=A(e,"value",15,""),n=A(e,"placeholder",3,""),y=A(e,"className",3,""),h=A(e,"inputElement",15,null);function _(){setTimeout(()=>c(a,!1))}function k(j){var M;t(j),(M=h())==null||M.focus()}o().globalOnClick.push(()=>{c(a,!1)});var m=rt(),S=u(m),r=u(S);He(r),Be(r,j=>h(j),()=>h());var b=x(r,2);b.__click=[Ze,a];var v=u(b),F=u(v);Ve(F,{className:"block"}),d(v),d(b),d(S);var g=x(S,2);{var U=j=>{var M=at(),R=x(u(M),2);Oe(R,17,()=>e.items,Ue,(re,$)=>{var T=tt();T.__click=[et,k,$];var Q=u(T);{var G=B=>{var ue=L(),_e=H(ue);me(_e,()=>l($).icon,(ke,$e)=>{$e(ke,{})}),w(B,ue)};Z(Q,B=>{l($).icon!==null&&B(G)})}var ce=x(Q,2),xe=u(ce,!0);d(ce),d(T),le(()=>{var B;z(T,1,`flex justify-start items-center w-full gap-2 p-2 rounded-md ${((B=t())==null?void 0:B.value)===l($).value?"bg-light-field-subbg dark:bg-dark-field-subbg":""}`),Ne(xe,l($).name)}),w(re,T)}),d(M),w(j,M)};Z(g,j=>{l(a)&&j(U)})}d(m),le(()=>{var j;z(m,1,`bg-light-field-bg dark:bg-dark-field-bg rounded-lg ${l(a)?"rounded-br-none":""} pr-1 flex flex-col justify-start relative ${(j=y())!=null?j:""}`),Le(r,"placeholder",n()),z(v,1,`duration-300 transition-transform block ${l(a)?"rotate-180":""}`)}),we("blur",r,_),Re(r,i),w(s,m),E(),p()}ie(["click"]);var lt=O(`<header class="fixed top-0 -translate-x-1/2 left-1/2 w-full max-w-[500px] h-16 flex justify-center items-center px-3 py-3 pr-4 gap-4 rounded-b-lg
     dark:bg-dark-card-3 bg-light-card-3 *:dark:text-dark-fg-500 *:text-light-fg-500 z-50"><!> <!> <!></header>`);function st(s,e){P(e,!0);const[f,p]=te(),o=()=>ae(ee,"$searchingFor",f);A(e,"searchFor",11,"user");const a=Fe();let t=N(null),i=N("");K(()=>{setTimeout(()=>{var r;return(r=l(t))==null?void 0:r.focus()})}),K(()=>{var r;(r=l(t))==null||r.addEventListener("keyup",b=>{var v;b.key=="Enter"&&(b.preventDefault(),n(),(v=l(t))==null||v.blur())})});function n(){if(l(t)&&l(t).value.trim()){const r=l(t).value.trim();switch(o().value){case"restaurant":a.searchRestaurants(r);break;default:a.searchUsers(r);break}}}var y=lt(),h=u(y);qe(h,{"aria-label":"back-button",role:"button",onclick:()=>{C(e.onExit)}});var _=x(h,2);const k=fe(()=>Object.values(oe)),m=fe(()=>`Search for ${o().name}`);nt(_,{get items(){return l(k)},get placeholder(){return l(m)},className:"w-full h-full px-3",get value(){return l(i)},set value(r){c(i,r,!0)},get currentItem(){return Ce(),o()},set currentItem(r){ve(ee,r)},get inputElement(){return l(t)},set inputElement(r){c(t,r,!0)}});var S=x(_,2);be(S,{"aria-label":"search-button",role:"button",onclick:n}),d(y),w(s,y),E(),p()}var ot=()=>C("/app",{replaceState:!1}),it=()=>C("/app/review/create",{replaceState:!1}),ct=()=>C("/app/user",{replaceState:!1}),ut=O(`<!> <main class="pb-18 pt-16 min-h-dvh bg-light-bg dark:bg-dark-bg flex flex-col"><!></main> <!> <!> <nav class="fixed bottom-0 -translate-x-1/2 left-1/2 w-full max-w-[500px] h-18 flex items-center justify-center p-3 px-0 rounded-t-lg 
    dark:bg-dark-card-3 bg-light-card-3 *:dark:text-dark-fg-500 *:text-light-fg-500"><ul class="flex items-center justify-around w-full h-full text-sm"><li><button><!></button> <span>Home</span></li> <li><button><!></button> <span class="text-[1.07rem]">Create</span></li> <li><button><!></button> <span>Profile</span></li></ul></nav>`,1);function It(s,e){P(e,!0);const f=Ie();let p=N("user"),o=N(!1),a=N("/app?context=feed");K(()=>{var Q,G;((Q=I.url.searchParams.get("context"))!=null?Q:"feed")=="search"?c(o,!0):(c(o,!1),f.clearResults()),c(a,(G=I.url.searchParams.get("then"))!=null?G:"/app?context=feed",!0);const T=I.url.searchParams.get("for");c(p,T==="food"||T==="restaurant"?T:"user",!0)});var t=ut(),i=H(t);{var n=$=>{st($,{get onExit(){return l(a)},get searchFor(){return l(p)}})},y=$=>{Ke($,{})};Z(i,$=>{l(o)?$(n):$(y,!1)})}var h=x(i,2),_=u(h);V(_,()=>e.children),d(h);var k=x(h,2);je(k,{});var m=x(k,2);Ge(m,{});var S=x(m,2),r=u(S),b=u(r);z(b,1,q(["flex flex-col justify-between items-center h-full"]));var v=u(b);v.__click=[ot];var F=u(v);Qe(F,{size:"20",class:"m-auto"}),d(v),ne(2),d(b);var g=x(b,2);z(g,1,q(["flex flex-col justify-between items-center h-full -translate-y-1"]));var U=u(g);U.__click=[it];var j=u(U);De(j,{size:"22",class:"m-auto"}),d(U),ne(2),d(g);var M=x(g,2);z(M,1,q(["flex flex-col justify-between items-center h-full"]));var R=u(M);R.__click=[ct];var re=u(R);J(re,{size:"20",class:"m-auto"}),d(R),ne(2),d(M),d(r),d(S),le($=>{z(v,1,q(["w-14 rounded-full flex justify-center align-center h-6",{"bg-light-fg-500 dark:bg-dark-fg-500 text-light-card-2 dark:text-dark-card-3":I.url.pathname==="/app"}])),z(U,1,$),z(R,1,q(["w-14 rounded-full flex justify-center align-center h-6",{"bg-light-fg-500 dark:bg-dark-fg-500 text-light-card-2 dark:text-dark-card-3":I.url.pathname==="/app/user"}]))},[()=>q(["w-16 rounded-full flex justify-center items-center align-center h-8 py-1",{"bg-light-fg-500 dark:bg-dark-fg-500 text-light-card-2 dark:text-dark-card-3":I.url.pathname.startsWith("/app/review/create")}])]),w(s,t),E()}ie(["click"]);export{It as component};
