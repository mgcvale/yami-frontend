var S=(o,e,t)=>new Promise((r,a)=>{var c=s=>{try{i(t.next(s))}catch(h){a(h)}},n=s=>{try{i(t.throw(s))}catch(h){a(h)}},i=s=>s.done?r(s.value):Promise.resolve(s.value).then(c,n);i((t=t.apply(o,e)).next())});import"./COm6N4YE.js";import{p as w,h as F,a as P,g as M,j as O,b as d,c as y,f as T,d as m,s as f,r as p,n as A,V as D,t as R,m as j,k as oe,o as k,l as v,X as ne}from"./FcNz6uVe.js";import{s as L,r as B,p as z}from"./BdHP4ea0.js";import{I as U,X as G,m as V,s as K,e as Q,f as Y,c as C,a as ee}from"./tpmtnrJv.js";import{s as b}from"./CQT1G1Sl.js";import{B as I,h as te}from"./Dx98FtbP.js";import{g as J}from"./BsEKk5dv.js";import{c as X}from"./BWmCwwzs.js";import"./BQspDZ5E.js";import"./vsAJmYaO.js";import{D as W}from"./D4ODo2ld.js";import{i as ie}from"./7ms9Oyq9.js";import{P as le}from"./DH25bUqh.js";import{i as ce,S as de}from"./BtRaPuvF.js";import{T as ue}from"./CAS4DjvC.js";import{s as q}from"./Cb4E-4CT.js";function Me(o,e){w(e,!0);let t=B(e,["$$slots","$$events","$$legacy"]);const r=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]];U(o,L({name:"ellipsis-vertical"},()=>t,{get iconNode(){return r},children:(a,c)=>{var n=F(),i=P(n);M(i,()=>{var s;return(s=e.children)!=null?s:O}),d(a,n)},$$slots:{default:!0}})),y()}function Oe(o,e){w(e,!0);let t=B(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}]];U(o,L({name:"heart"},()=>t,{get iconNode(){return r},children:(a,c)=>{var n=F(),i=P(n);M(i,()=>{var s;return(s=e.children)!=null?s:O}),d(a,n)},$$slots:{default:!0}})),y()}function Le(o,e){w(e,!0);let t=B(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];U(o,L({name:"pencil"},()=>t,{get iconNode(){return r},children:(a,c)=>{var n=F(),i=P(n);M(i,()=>{var s;return(s=e.children)!=null?s:O}),d(a,n)},$$slots:{default:!0}})),y()}function Be(o,e){w(e,!0);let t=B(e,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}]];U(o,L({name:"trash"},()=>t,{get iconNode(){return r},children:(a,c)=>{var n=F(),i=P(n);M(i,()=>{var s;return(s=e.children)!=null?s:O}),d(a,n)},$$slots:{default:!0}})),y()}var ve=T('<div class="p-4 relative"><!> <h1 class="font-alegreya text-xl pb-2"> </h1> <p class="text-sm pb-4"> </p> <div class="flex justify-end gap-3"><!> <!></div></div>');function Ue(o,e){w(e,!0);function t(u){e.action(u),V.set(null)}var r=ve(),a=m(r);G(a,{class:"absolute top-3 right-3 cursor-pointer",onclick:()=>t(!1)});var c=f(a,2),n=m(c);p(c);var i=f(c,2),s=m(i);p(i);var h=f(i,2),x=m(h);I(x,{onclick:()=>t(!1),className:"px-4",children:(u,g)=>{A();var $=D("Cancel");d(u,$)},$$slots:{default:!0}});var H=f(x,2);I(H,{accent:!0,onclick:()=>t(!0),className:"px-4",children:(u,g)=>{A();var $=D("Confirm");d(u,$)},$$slots:{default:!0}}),p(h),p(r),R(u=>{var g;b(n,`Confirm ${(g=e.actionName)!=null?g:""}`),b(s,`Are you sure you want to ${u!=null?u:""}?`)},[()=>e.actionName.toLowerCase()]),d(o,r),y()}function He(o){return S(this,null,function*(){if(J(X).data===null)return K(W.USER_NOT_LOADED);try{return yield Q(yield Y(C.apiPaths.deleteFoodReview(o),{method:"DELETE",headers:{Authorization:`Bearer ${J(X).data.accessToken}`}},C.fetchTimeout)),ee(null)}catch(e){return te(e)}})}var fe=T('<span class="text-center w-full"> </span>');function je(o,e){var t=fe(),r=m(t,!0);p(t),R(()=>b(r,e.successMessage)),d(o,t)}function me(o,e,t){return S(this,null,function*(){const r=J(X);if(r.data===null)return K(W.USER_NOT_LOADED);try{const a=yield Q(yield Y(C.apiPaths.updateFoodReview(o),{method:"PATCH",headers:{Authorization:`Bearer ${r.data.accessToken}`},body:JSON.stringify({review:e,rating:t})},C.fetchTimeout));if(!ce(a))throw W.BAD_RESPONSE;return ee(a)}catch(a){return te(a)}})}var pe=T('<span class="text-light-error dark:text-dark-error text-center pb-2"> </span>'),he=T('<!> <div class="flex justify-between px-2 py-1 pb-4"><!></div> <div class="flex flex-col gap-4"><!> <div class="flex flex-col"><span class="pl-1">Review</span> <!></div> <!> <!></div>',1);function ze(o,e){w(e,!0);let t=z(e,"review",15),r=j(t().rating/2),a=j(oe(t().review)),c=j(""),n=ne(()=>v(r)===t().rating/2&&v(a)===t().review);function i(){return S(this,null,function*(){const l=yield me(t().id,v(a),v(r)*2);l.error!==null?k(c,"An error ocurred: ".concat(l.error.message),!0):(t(l.data),V.set(null),location.reload())})}var s=he(),h=P(s);G(h,{class:"absolute cursor-pointer top-4 right-4",onclick:()=>V.set(null)});var x=f(h,2),H=m(x);le(H,{className:" p-0!",children:(l,N)=>{A();var _=D();R(()=>{var E;return b(_,`Edit ${(E=t().foodName)!=null?E:""}'s review`)}),d(l,_)},$$slots:{default:!0}}),p(x);var u=f(x,2),g=m(u);de(g,{name:"Rating",className:"mt-4",get value(){return v(r)},set value(l){k(r,l,!0)}});var $=f(g,2),ae=f(m($),2);ue(ae,{maxLength:256,textarea:!0,noDecoration:!0,placeholder:"Review (optional)",className:"grow",get value(){return v(a)},set value(l){k(a,l,!0)}}),p($);var Z=f($,2);{var re=l=>{var N=pe(),_=m(N);p(N),R(()=>{var E;return b(_,`Error: ${(E=v(c))!=null?E:""}`)}),d(l,N)};ie(Z,l=>{v(c)&&v(c)!==""&&l(re)})}var se=f(Z,2);I(se,{accent:!0,onclick:i,get disabled(){return v(n)},set disabled(l){k(n,l,!0)},children:(l,N)=>{A();var _=D("Update info");d(l,_)},$$slots:{default:!0}}),p(u),d(o,s),y()}var ge=T("<div><div></div></div>");function Ve(o,e){let t=z(e,"lineClassName",3,""),r=z(e,"containerClassName",3,"");var a=ge(),c=m(a);p(a),R(()=>{var n,i;q(a,1,`w-full ${(n=r())!=null?n:""}`),q(c,1,`w-full h-[2px] ${(i=t())!=null?i:""}`)}),d(o,a)}export{Ue as C,Ve as D,Me as E,ze as F,Oe as H,Le as P,je as S,Be as T,He as d};
