var K=(s,e,i)=>new Promise((n,f)=>{var u=r=>{try{c(i.next(r))}catch(_){f(_)}},g=r=>{try{c(i.throw(r))}catch(_){f(_)}},c=r=>r.done?n(r.value):Promise.resolve(r.value).then(u,g);c((i=i.apply(s,e)).next())});import"./COm6N4YE.js";import{p as Z,h as D,a as E,g as $,j as fe,b,c as ee,f as T,d as a,r as t,t as F,l as S,m as O,X as me,s as d,o as j}from"./FcNz6uVe.js";import{s as I}from"./CQT1G1Sl.js";import{i as Q}from"./7ms9Oyq9.js";import{I as ue,c as U,g as o,m as W}from"./tpmtnrJv.js";import{d as ge}from"./BsEKk5dv.js";import{s as we,r as _e,p as H}from"./BdHP4ea0.js";import{s as he}from"./Cb4E-4CT.js";import{R as pe}from"./Bg0mXhfR.js";import{g as ae}from"./QXgKwo3K.js";import{C as xe}from"./DQJhOXeN.js";import{E as ke,P as be,T as Ne,H as ye,F as Ie,C as Ce,d as Ee,S as Me}from"./CUUdhvzw.js";import{s as Y}from"./Bya-iZhh.js";import{E as Re}from"./BtRaPuvF.js";function Pe(s,e){Z(e,!0);let i=_e(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m2 9 3-3 3 3"}],["path",{d:"M13 18H7a2 2 0 0 1-2-2V6"}],["path",{d:"m22 15-3 3-3-3"}],["path",{d:"M11 6h6a2 2 0 0 1 2 2v10"}]];ue(s,we({name:"repeat-2"},()=>i,{get iconNode(){return n},children:(f,u)=>{var g=D(),c=E(g);$(c,()=>{var r;return(r=e.children)!=null?r:fe}),b(f,g)},$$slots:{default:!0}})),ee()}var Se=T("<div><!></div>");function je(s,e){let i=H(e,"className",3,"");var n=Se(),f=a(n);$(f,()=>e.children),t(n),F(()=>{var u;return he(n,1,`w-full h-fit bg-light-card-2 dark:bg-dark-card-1 p-4 pt-2 items-start flex flex-col gap-2 jutsify-start rounded-2xl ${(u=i())!=null?u:""}`)}),b(s,n)}var De=T('<div class="flex justify-start items-center h-8"><img class="h-full aspect-square w-auto rounded-md"/> <div class="flex flex-col justify-between items-start"><span class="text-light-fg-100 dark:text-dark-fg-100"> </span> <span class="text-light-fg-300 dark:text-dark-fg-300"> </span></div></div>'),Fe=(s,e)=>{s.preventDefault(),ae(`/app/restaurant?id=${e.review.restaurantId}`)},He=(s,e)=>{s.preventDefault(),ae(`/app/restaurant?id=${e.review.restaurantId}`)},Te=T('<div class="flex justify-around items-center h-10 text-start w-full gap-2"><a class="h-full"><img class="h-full aspect-square rounded-md"/></a> <div class="grow overflow-hidden"><a class="text-light-fg-500 dark:text-dark-fg-500 font-alegreya text-lg leading-tight truncate"> </a> <a class="block text-light-fg-300 dark:text-dark-fg-300 text-sm truncate"> </a></div> <!> <div class="flex relative"><!> <!></div></div> <p class="text-start pt-1 text-ms"> </p> <div class="w-full flex justify-end items-center gap-4 plr-2 pt-1 text-light-fg-700 dark:text-dark-fg-700"><!> <!></div>',1);function $e(s,e){Z(e,!0);let i=H(e,"collapsed",3,!1);H(e,"ownsReview",3,!1);function n(){W.set({component:Ie,props:{review:e.review}})}function f(){W.set({component:Ce,props:{actionName:"Delete this review",action:m=>{m&&u()}}})}function u(){return K(this,null,function*(){const m=yield Ee(e.review.id);m.error!==null?Y.set({component:Re,props:{warningMessage:`Error deleting your review: ${m.error.message}`}}):(Y.set({component:Me,props:{successMessage:"Success deleting your review!"}}),j(g,!0))})}let g=O(!1),c=O(!1);const r=[{name:"Edit",icon:be,action:n},{name:"Delete",icon:Ne,action:f,className:"text-light-error dark:text-dark-error"}];var _=D(),te=E(_);{var re=m=>{const se=me(()=>(i()?"bg-light-card-2 dark:bg-dark-card-2":"")+" pt-4");je(m,{get className(){return S(se)},children:(ie,Ve)=>{var V=D(),oe=E(V);{var ne=h=>{var p=De(),w=a(p),v=d(w,2),x=a(v),N=a(x);t(x);var l=d(x,2),M=a(l);t(l),t(v),t(p),F(k=>{var C,y;o(w,"src",k),o(w,"alt",`${(C=e.review.foodName)!=null?C:""}'s food`),I(N,`Review by ${(y=e.review.username)!=null?y:""}`),I(M,`Rating: ${e.review.rating*2}`)},[()=>U.apiPaths.foodImage(e.review.foodId)]),b(h,p)},le=h=>{var p=Te(),w=E(p),v=a(w);v.__click=[Fe,e];var x=a(v);t(v);var N=d(v,2),l=a(N);l.__click=[He,e];var M=a(l,!0);t(l);var k=d(l,2),C=a(k);t(k),t(N);var y=d(N,2);pe(y,{get rating(){return e.review.rating}});var q=d(y,2),z=a(q);ke(z,{size:20,onclick:()=>setTimeout(()=>j(c,!0))});var de=d(z,2);xe(de,{get entries(){return r},className:"bg-light-card-2! dark:bg-dark-card-2!",get showing(){return S(c)},set showing(P){j(c,P,!0)}}),t(q),t(w);var R=d(w,2),ce=a(R,!0);t(R);var L=d(R,2),X=a(L);Pe(X,{});var ve=d(X,2);ye(ve,{}),t(L),F(P=>{var A,B,G,J;o(v,"href",`/app/restaurant?id=${e.review.restaurantId}`),o(v,"aria-label",`View details for ${(A=e.review.restaurantName)!=null?A:""}`),o(x,"src",P),o(x,"alt",e.review.restaurantName),o(l,"href",`/app/restaurant?id=${e.review.restaurantId}`),o(l,"aria-label",`View details for ${(B=e.review.restaurantName)!=null?B:""}`),o(l,"title",e.review.restaurantName),I(M,e.review.restaurantName),o(k,"href",`/app/food?id=${e.review.foodId}`),o(k,"title",`${(G=e.review.foodName)!=null?G:""} review`),I(C,`${(J=e.review.foodName)!=null?J:""} review`),I(ce,e.review.review)},[()=>U.apiPaths.restaurantImage(e.review.restaurantId)]),b(h,p)};Q(oe,h=>{i()?h(ne):h(le,!1)})}b(ie,V)},$$slots:{default:!0}})};Q(te,m=>{S(g)||m(re)})}b(s,_),ee()}ge(["click"]);export{$e as F};
